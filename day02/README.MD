# Day 02

## 指令汇总

|      |                    |                                                              |
| ---- | ------------------ | ------------------------------------------------------------ |
| ORG  | origin             | 告诉nask，本程序被装载在0x7c00处                             |
| DB   | define Byte        | 声明1个字节的内容                                            |
| DW   | define Word        | 声明2个字节的内容                                            |
| DD   | define double word | 声明4个字节的内容                                            |
| MOV  | move               | 赋值                                                         |
| ADD  | add                | 加法                                                         |
| JMP  | jump               | 表示跳到指定的内存地址，或者指定label，label本质也是指定地址 |
| CMP  | compare            | 比较，CMP AL,0即比较AL寄存器中值是否为0                      |
| JE   | jump if equal      | 如果等于就跳转，一般配合CMP使用                              |
| INT  | interrupt          | 中断，中断CPU正在做的事情而去处理发出中断的事件，如鼠标移动、键盘输入... |
| HLT  | halt               | 让 CPU 停止执行任何指令，直到接收到外部中断或复位信号。 CPU 将进入一种低功耗状态，等待外部事件的触发 |
| RESB | reserve byte       | 预留字节，比如RESB 10表示此处往后预留10个字节，初始化为0     |

## ORG伪命令

- ORG是Origin的缩写:起始地址源。在汇编语言源程序的开始通常都用一条ORG伪指令来实现规定程序的起始地址。如果不用ORG规定则汇编得到的目标程序将从0000H开始
- cpu在接收到int 0x19中断后，调用中断服务程序，将软盘第一扇区（512B）的程序加载到0X07c00这个地址上，操作系统BIOS会去执行0x7c00往后的512字节的指令
- 因为这段程序将会加载到0x07c00上，所以使用org 0x7c00来规范代码（代码使用相对地址时使用）。而不是使用org 0x7c00,程序才会加载到0x07c00上
- 使用了 org后，entry = entry + 0x7c00

## 0x7c00的含义

- 内存中不是所有的内存都可以供应用程序使用的
  - 如：0xf0000好地址存BOIS程序不能用
- 程序中ORG的指令的值为启动区内容的装载地址：0x00007c00 - 0x00007dff
- 这个地址是IBM硬件上做好的规定

## 编译过程

1. 源代码ipl.nas -> ipl.bin, ipl.lst

    > ipl.bin汇编代码编译后的机器代码
    >
    > ​ipl.lst是每句汇编指令和机器指令的对照

2. 以二进制代码制作磁盘映像文件
